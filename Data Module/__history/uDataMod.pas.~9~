unit uDataMod;

interface

uses
  System.SysUtils, System.Classes, FireDAC.Stan.Intf, FireDAC.Stan.Option,
  FireDAC.Stan.Param, FireDAC.Stan.Error, FireDAC.DatS, FireDAC.Phys.Intf,
  FireDAC.DApt.Intf, FireDAC.Stan.StorageBin, Data.DB, FireDAC.Comp.DataSet,
  FireDAC.Comp.Client, FireDAC.Stan.StorageJSON, FireDAC.Stan.StorageXML,
  FireDAC.Stan.ExprFuncs, FireDAC.Phys.SQLiteDef, FireDAC.UI.Intf,
  FireDAC.Stan.Def, FireDAC.Stan.Pool, FireDAC.Stan.Async, FireDAC.Phys,
  FireDAC.Phys.SQLite, FireDAC.VCLUI.Wait, FireDAC.DApt, System.Variants,
  FireDAC.Phys.SQLiteVDataSet, FireDAC.Comp.BatchMove.Text, System.IOUtils,
  FireDAC.Comp.BatchMove, FireDAC.Comp.BatchMove.DataSet, System.StrUtils,
  FireDAC.Phys.SQLiteWrapper.Stat;

type
  TUser = class(Tobject)
    id: Integer;
    username: String;
    isAdmin: boolean;
    isActive: boolean;
  end;

  TDM = class(TDataModule)
    LeadsFDMemTable: TFDMemTable;
    FDStanStorageBinLink1: TFDStanStorageBinLink;
    FDStanStorageXMLLink1: TFDStanStorageXMLLink;
    FDStanStorageJSONLink1: TFDStanStorageJSONLink;
    StatusFDMemTable: TFDMemTable;
    AcctFDMemTable: TFDMemTable;
    UsersFDMemTable: TFDMemTable;
    DocsFDMemTable: TFDMemTable;
    ProposalFDMemTable: TFDMemTable;
    ProposalStatusFDMemTable: TFDMemTable;
    FDPhysSQLiteDriverLink1: TFDPhysSQLiteDriverLink;
    conSGLGB: TFDConnection;
    FDLocalSQL1: TFDLocalSQL;
    FDEmailsQuery: TFDQuery;
    FDBatchMove1: TFDBatchMove;
    FDBatchMoveDataSetReader1: TFDBatchMoveDataSetReader;
    FDBatchMoveTextWriter1: TFDBatchMoveTextWriter;
    FDAccountsQuery: TFDQuery;
    FDLeadsQueryNew: TFDQuery;
    FDProposalsQuery: TFDQuery;
    FDLeadsQueryActive: TFDQuery;
    FDLeadsQueryProposalSent: TFDQuery;
    FDLeadsQueryClosed: TFDQuery;
    LineItemsFDMemTable: TFDMemTable;
    DraftProposalFDMemTable: TFDMemTable;
    LineItemsTotalQuery: TFDQuery;
    FDQueryNewTotal: TFDQuery;
    FDQueryActiveTotal: TFDQuery;
    FDQueryProposalTotal: TFDQuery;
    FDQueryClosedTotal: TFDQuery;
    FDQueryTotal: TFDQuery;
    FDQueryInactiveTotal: TFDQuery;
    LeadsFDTable: TFDTable;
    FDSQLiteSecurity1: TFDSQLiteSecurity;
    DocsFDTable: TFDTable;
    UsersFDTable: TFDTable;
    AcctFDTable: TFDTable;
    ProposalsFDTable: TFDTable;
    FDDocsQuery: TFDQuery;
    FDLeadsQueryAll: TFDQuery;
    qTemp: TFDQuery;
    procedure DataModuleCreate(Sender: TObject);
  private
    { Private declarations }
    FUser: TUser;
  public
    { Public declarations }
    property User: TUser read FUser write FUser;
    procedure SetUser(const AUsername: String);
 end;
  const
    DB_FILENAME = 'w10crmdemo.sdb';
    DB_PASSWORD = 'SecretPassword';
    DB_ENCRYPTION = 'aes-256';
    DB_LEADSTABLE = 'Leads';
    DB_ACCTSTABLE = 'Accounts';
    DB_USERSTABLE = 'Users';
    DB_DOCSTABLE = 'Docs';
    DB_PROPOSALSTABLE = 'Proposals';

var
  DM: TDM;

implementation

{%CLASSGROUP 'Vcl.Controls.TControl'}
{$R *.dfm}

procedure TDM.DataModuleCreate(Sender: TObject);
begin
  FUser := TUser.Create;
end;

end.
